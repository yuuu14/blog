---
layout: post
title: On Python
date: 2021-11-15 11:14 +0800
---

## Buffering
Buffering: FIFO queue in memory, not write to disk until it is full.  

`flush()`: write data on buffer to disk


## Threading
use threading while display `tqdm` bar:  
[how to use tqdm with multithreading?](https://stackoverflow.com/questions/63826035/how-to-use-tqdm-with-multithreading)
```py
from concurrent.futures import ThreadPoolExecutor, as_completed
from tqdm import tqdm

def task(param):
    # do something
    return param

params = ['test1', 'test2']
with tqdm(total=len(urls)) as pbar:
    with ThreadPoolExecutor(max_workers=10) as ex:
        futures = [ex.submit(task, param) for param in params]
        for future in as_completed(futures):
            result = future.result()
            pbar.update(1)
```

## for/else
[`for/else`](https://book.pythontips.com/en/latest/for_-_else.html)
```py
for item in container:
    if search_something(item):
        # Found it!
        process(item)
        break
else:
    # Didn't find anything..
    not_found_in_container()
```